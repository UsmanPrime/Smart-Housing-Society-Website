import{j as e,N as p,F as f}from"./index-DJsc_qVc.js";import{u as j,r as n}from"./react-core-Ljpx9oFu.js";import{a as y}from"./api-Ca_vtYKz.js";import"./vendor-B9ygI19o.js";function D(){const i=j(),[l,d]=n.useState(!1),[c,s]=n.useState(""),[u,m]=n.useState(""),[t,h]=n.useState({title:"",description:"",amount:"",chargeMonth:"",dueDate:""}),r=o=>{const{name:a,value:b}=o.target;h(g=>({...g,[a]:b}))},x=async o=>{if(o.preventDefault(),s(""),m(""),!t.title||!t.amount||!t.chargeMonth){s("Please fill in all required fields.");return}if(parseFloat(t.amount)<=0){s("Amount must be greater than 0.");return}d(!0);try{const a=await y.post("/api/payments/charges/create",t);a.success&&(m(`Charge created successfully! Assigned to ${a.assignedCount||0} residents.`),h({title:"",description:"",amount:"",chargeMonth:"",dueDate:""}),setTimeout(()=>{i("/admin/dashboard")},2e3))}catch(a){console.error("Error creating charge:",a),s(a.message||"Failed to create charge. Please try again.")}finally{d(!1)}};return e.jsxs("div",{className:"min-h-screen flex flex-col bg-[#c3c5ce]",children:[e.jsx(p,{}),e.jsx("main",{className:"flex-grow pt-40 pb-16 px-6",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsx("h1",{className:"text-4xl font-normal text-[#06164a] mb-8 text-center",style:{fontFamily:"'DM Serif Display', serif"},children:"Create Monthly Charge"}),c&&e.jsx("div",{className:"rounded-md border border-red-400 bg-red-100 text-red-800 px-4 py-3 mb-6",children:c}),u&&e.jsx("div",{className:"rounded-md border border-green-400 bg-green-100 text-green-800 px-4 py-3 mb-6",children:u}),e.jsxs("form",{onSubmit:x,className:"bg-white rounded-xl shadow-md p-8 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block text-[#06164a] font-medium mb-2",children:"Charge Title *"}),e.jsx("input",{type:"text",id:"title",name:"title",value:t.title,onChange:r,required:!0,className:"w-full px-4 py-2 rounded-md bg-white text-[#06164a] border border-[#06164a] focus:outline-none focus:ring-2 focus:ring-[#06164a]",placeholder:"e.g., December 2024 Maintenance"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-[#06164a] font-medium mb-2",children:"Description"}),e.jsx("textarea",{id:"description",name:"description",value:t.description,onChange:r,rows:"4",className:"w-full px-4 py-2 rounded-md bg-white text-[#06164a] border border-[#06164a] focus:outline-none focus:ring-2 focus:ring-[#06164a] resize-none",placeholder:"Enter charge description..."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"amount",className:"block text-[#06164a] font-medium mb-2",children:"Amount (PKR) *"}),e.jsx("input",{type:"number",id:"amount",name:"amount",value:t.amount,onChange:r,required:!0,min:"0",step:"0.01",className:"w-full px-4 py-2 rounded-md bg-white text-[#06164a] border border-[#06164a] focus:outline-none focus:ring-2 focus:ring-[#06164a]",placeholder:"Enter amount"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"chargeMonth",className:"block text-[#06164a] font-medium mb-2",children:"Charge Month (YYYY-MM) *"}),e.jsx("input",{type:"month",id:"chargeMonth",name:"chargeMonth",value:t.chargeMonth,onChange:r,required:!0,className:"w-full px-4 py-2 rounded-md bg-white text-[#06164a] border border-[#06164a] focus:outline-none focus:ring-2 focus:ring-[#06164a]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"dueDate",className:"block text-[#06164a] font-medium mb-2",children:"Due Date (Optional)"}),e.jsx("input",{type:"date",id:"dueDate",name:"dueDate",value:t.dueDate,onChange:r,className:"w-full px-4 py-2 rounded-md bg-white text-[#06164a] border border-[#06164a] focus:outline-none focus:ring-2 focus:ring-[#06164a]"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"submit",disabled:l,className:"flex-1 px-6 py-3 bg-[#06164a] text-white font-semibold rounded-md hover:bg-[#0f335b] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Creating...":"Create Charge"}),e.jsx("button",{type:"button",onClick:()=>i(-1),className:"px-6 py-3 bg-white text-[#06164a] font-semibold rounded-md border border-[#06164a] hover:bg-gray-100 transition-all",children:"Cancel"})]})]})]})}),e.jsx(f,{})]})}export{D as default};
