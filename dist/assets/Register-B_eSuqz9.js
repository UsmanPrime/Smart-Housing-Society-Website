const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CCpieWfV.css","assets/index-DSpZquNv.css"])))=>i.map(i=>d[i]);
import{j as e,N as Q,r as W,F as X,_ as T}from"./index-DJsc_qVc.js";import{r as s,u as ee,L}from"./react-core-Ljpx9oFu.js";import{a as te}from"./vendor-B9ygI19o.js";import{p as se}from"./register-DvUBbC6m.js";function ne(){const[n,O]=s.useState("resident"),[d,D]=s.useState(""),[u,V]=s.useState(""),[o,$]=s.useState(""),[x,B]=s.useState(""),[p,M]=s.useState(""),[r,m]=s.useState([]),[w,y]=s.useState(!1),[H,U]=s.useState(!1),[h,v]=s.useState(!1),[j,l]=s.useState(""),[N,P]=s.useState(""),[S,Y]=s.useState(!1),Z=ee(),f=[{value:"plumbing",label:"Plumbing"},{value:"electrical",label:"Electrical"},{value:"cleaning",label:"Cleaning"},{value:"maintenance",label:"Maintenance"},{value:"security",label:"Security"},{value:"other",label:"Other"}],q=t=>{m(a=>a.includes(t)?a.filter(i=>i!==t):[...a,t])},G=()=>{m(f.map(t=>t.value))},J=()=>{m([])};s.useEffect(()=>{(async()=>{await Promise.all([T(()=>Promise.resolve({}),__vite__mapDeps([0])),T(()=>Promise.resolve({}),__vite__mapDeps([1]))])})();const a=setTimeout(()=>U(!0),20);return()=>clearTimeout(a)},[]);const K=async t=>{var a,i,k,C,E,_,A,F,R,I;if(t.preventDefault(),l(""),P(""),!d||!u||!o||!x||!p){l("Please fill all fields");return}if(o!==x){l("Passwords do not match");return}if(!S){l("Please verify that you are not a robot");return}v(!0);try{const b=`${(((i=(a=import.meta)==null?void 0:a.env)==null?void 0:i.VITE_API_BASE_URL)||"").trim()}/api/auth/register`,z={name:d,email:u,password:o,phone:p,role:n};n==="vendor"&&(z.specialization=r);const g=await te.post(b,z);(k=g.data)!=null&&k.success?(P(((C=g.data)==null?void 0:C.message)||"Registration successful! Please wait for admin approval."),setTimeout(()=>Z("/login"),2e3)):l(((E=g.data)==null?void 0:E.message)||"Registration failed")}catch(c){const b=((A=(_=c.response)==null?void 0:_.data)==null?void 0:A.message)||(Array.isArray((R=(F=c.response)==null?void 0:F.data)==null?void 0:R.errors)?(I=c.response.data.errors[0])==null?void 0:I.msg:null)||"Registration failed. Please try again.";l(b)}finally{v(!1)}};return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(Q,{}),e.jsx("style",{children:`
        input:-webkit-autofill,
        input:-webkit-autofill:hover,
        input:-webkit-autofill:focus,
        input:-webkit-autofill:active {
          -webkit-box-shadow: 0 0 0px 1000px #0b1a4a inset !important;
          box-shadow: 0 0 0px 1000px #0b1a4a inset !important;
          -webkit-text-fill-color: #ffffff !important;
        }
        input:-moz-autofill {
          box-shadow: 0 0 0px 1000px #0b1a4a inset !important;
          -moz-text-fill-color: #ffffff !important;
        }
      `}),e.jsxs("main",{className:"relative flex-grow flex items-center justify-center min-h-screen pt-36 pb-20",style:{backgroundImage:`url(${se})`,backgroundPosition:"top center",backgroundSize:"cover",backgroundRepeat:"no-repeat"},children:[e.jsx("div",{className:"absolute inset-0 bg-black/45 pointer-events-none"}),e.jsx("div",{className:`
            relative z-10 w-full max-w-4xl px-6 md:px-8 mt-8
            transform transition-all duration-500 ease-out
            ${H?"opacity-100 translate-y-0 scale-100":"opacity-0 -translate-y-6 scale-95"}
          `,children:e.jsxs("div",{className:"mx-auto max-w-2xl",children:[e.jsxs("div",{className:"text-left mb-8",children:[e.jsx("h1",{className:"text-4xl font-normal text-white mb-2",style:{fontFamily:'"DM Serif Display", serif'},children:"Register"}),e.jsx("p",{className:"text-lg text-white/90",style:{fontFamily:"Poppins, sans-serif"},children:"Create New Account"})]}),e.jsxs("form",{className:"space-y-8",onSubmit:K,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-lg font-medium text-white/90 mb-3",style:{fontFamily:"Poppins, sans-serif"},children:"Select user type"}),e.jsxs("select",{value:n,onChange:t=>O(t.target.value),className:"w-full px-6 py-4 rounded-xl text-white text-lg bg-[#0b1a4a] border border-white/10 focus:outline-none focus:ring-2 focus:ring-white/30",style:{fontFamily:"Poppins, sans-serif"},children:[e.jsx("option",{value:"resident",children:"Resident"}),e.jsx("option",{value:"vendor",children:"Vendor"})]})]}),n==="vendor"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-lg font-medium text-white/90 mb-3",style:{fontFamily:"Poppins, sans-serif"},children:"Specialization (select one or more)"}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>y(t=>!t),className:"w-full px-6 py-4 rounded-xl text-white text-left text-lg bg-[#0b1a4a] border border-white/10 focus:outline-none focus:ring-2 focus:ring-white/30","aria-haspopup":"listbox","aria-expanded":w?"true":"false",children:[r.length===0&&e.jsx("span",{className:"text-white/70",children:"Select specializations"}),r.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(t=>{const a=f.find(i=>i.value===t);return e.jsx("span",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/10 text-white/90 text-sm",children:(a==null?void 0:a.label)||t},t)})})]}),w&&e.jsxs("div",{className:"absolute z-20 mt-2 w-full rounded-xl bg-[#0b1a4a] border border-white/10 shadow-lg",children:[e.jsx("div",{className:"max-h-52 overflow-y-auto py-2",children:f.map(t=>e.jsxs("label",{className:"flex items-center gap-3 px-4 py-3 hover:bg-white/5 cursor-pointer select-none",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 cursor-pointer",checked:r.includes(t.value),onChange:()=>q(t.value)}),e.jsx("span",{className:"text-white/90 capitalize",children:t.label})]},t.value))}),e.jsxs("div",{className:"flex items-center justify-between gap-2 px-3 py-2 border-t border-white/10 bg-[#0b1a4a]",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:G,className:"text-sm text-white/90 hover:underline",children:"Select all"}),e.jsx("button",{type:"button",onClick:J,className:"text-sm text-white/80 hover:underline",children:"Clear"})]}),e.jsx("button",{type:"button",onClick:()=>y(!1),className:"text-sm bg-white/10 hover:bg-white/20 text-white px-3 py-1 rounded-md",children:"Done"})]})]})]}),e.jsx("p",{className:"text-xs text-white/70 mt-2",children:"You can choose multiple options."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-lg font-medium text-white/90 mb-3",style:{fontFamily:"Poppins, sans-serif"},children:"Name"}),e.jsx("input",{type:"text",value:d,onChange:t=>D(t.target.value),placeholder:"Enter your full name",className:"w-full px-8 py-5 rounded-xl text-white text-lg placeholder-white/70 bg-[#0b1a4a] border border-white/10 focus:outline-none focus:ring-2 focus:ring-white/30"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-lg font-medium text-white/90 mb-3",style:{fontFamily:"Poppins, sans-serif"},children:"Email"}),e.jsx("input",{type:"email",value:u,onChange:t=>V(t.target.value),placeholder:"Enter your email",className:"w-full px-8 py-5 rounded-xl text-white text-lg placeholder-white/70 bg-[#0b1a4a] border border-white/10 focus:outline-none focus:ring-2 focus:ring-white/30"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-lg font-medium text-white/90 mb-3",style:{fontFamily:"Poppins, sans-serif"},children:"Password"}),e.jsx("input",{type:"password",value:o,onChange:t=>$(t.target.value),placeholder:"Create a password",className:"w-full px-8 py-5 rounded-xl text-white text-lg placeholder-white/70 bg-[#0b1a4a] border border-white/10 focus:outline-none focus:ring-2 focus:ring-white/30"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-lg font-medium text-white/90 mb-3",style:{fontFamily:"Poppins, sans-serif"},children:"Re-enter password"}),e.jsx("input",{type:"password",value:x,onChange:t=>B(t.target.value),placeholder:"Re-enter your password",className:"w-full px-8 py-5 rounded-xl text-white text-lg placeholder-white/70 bg-[#0b1a4a] border border-white/10 focus:outline-none focus:ring-2 focus:ring-white/30"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-lg font-medium text-white/90 mb-3",style:{fontFamily:"Poppins, sans-serif"},children:"Contact number"}),e.jsx("input",{type:"tel",value:p,onChange:t=>M(t.target.value),placeholder:"Enter contact number",className:"w-full px-8 py-5 rounded-xl text-white text-lg placeholder-white/70 bg-[#0b1a4a] border border-white/10 focus:outline-none focus:ring-2 focus:ring-white/30"})]}),e.jsxs("div",{className:"flex items-center gap-6 py-3 px-6 bg-[#0b1a4a] w-fit border border-white/10",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-white/30 flex items-center justify-center",children:e.jsx("input",{type:"checkbox",checked:S,onChange:t=>Y(t.target.checked),className:"w-4 h-4 cursor-pointer",id:"recaptcha-register"})}),e.jsx("label",{htmlFor:"recaptcha-register",className:"text-white/90 text-base cursor-pointer",style:{fontFamily:"Poppins, sans-serif"},children:"I'm not a robot"}),e.jsx("img",{src:W,alt:"reCAPTCHA",className:"w-8 h-8 ml-2"})]}),j&&e.jsx("div",{className:"bg-red-500/20 text-red-100 border border-red-500/30 rounded-xl p-4",children:j}),N&&e.jsx("div",{className:"bg-green-500/20 text-green-100 border border-green-500/30 rounded-xl p-4",children:N}),e.jsx("div",{className:"border-t border-white/30 my-6"}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:h,className:`group relative w-32 md:w-40 flex justify-center py-3 px-4 border border-transparent text-base font-medium rounded-md text-white bg-[#0b1a4a] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#0b1a4a] ${h?"opacity-60 cursor-not-allowed":"hover:opacity-95"}`,children:h?"Registering...":"Register"})}),e.jsxs("div",{className:"text-left space-y-2 pt-4",children:[e.jsx("div",{children:e.jsxs("span",{className:"text-base text-white/90",children:["Already have an account?"," ",e.jsx(L,{to:"/login",className:"underline",children:"Login"})]})}),e.jsx("div",{children:e.jsx(L,{to:"/forgot-password",className:"text-base text-white/90 underline",children:"Forget Your Password?"})})]})]}),e.jsx("div",{className:"h-8 md:h-12"})]})})]}),e.jsx(X,{})]})}export{ne as default};
