const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CCpieWfV.css","assets/index-DSpZquNv.css"])))=>i.map(i=>d[i]);
import{j as e,N as F,F as A,_ as f}from"./index-DJsc_qVc.js";import{r as o,u as R}from"./react-core-Ljpx9oFu.js";import{A as W}from"./AnnouncementsList-iTW8_Eje.js";import{a as m}from"./api-Ca_vtYKz.js";import{u as _}from"./useAuth-4QJvpUN4.js";import"./vendor-B9ygI19o.js";function O(){const[r,w]=o.useState(null),[d,h]=o.useState({}),[g,y]=o.useState([]),[p,u]=o.useState([]),[x,v]=o.useState({name:"",description:""}),[b,j]=o.useState(!1),c=R(),n=_();o.useEffect(()=>{const s=localStorage.getItem("user");if(s)try{const a=JSON.parse(s);w(a)}catch(a){console.error("Error parsing user data:",a)}(async()=>{await Promise.all([f(()=>Promise.resolve({}),__vite__mapDeps([0])),f(()=>Promise.resolve({}),__vite__mapDeps([1]))])})();const i=(n==null?void 0:n.token)||localStorage.getItem("token")||void 0,L=async()=>{try{const a=await m.get("/api/vendors/stats",{token:i});a!=null&&a.data&&(h(a.data),u(a.data.services||[]))}catch(a){console.warn("Failed to fetch vendor stats:",(a==null?void 0:a.message)||a)}},V=async()=>{var a;try{const l=await m.get("/api/vendors/my-work?limit=10",{token:i});if((a=l==null?void 0:l.data)!=null&&a.complaints){const D=l.data.complaints.filter(B=>["open","in-progress"].includes(B.status)).slice(0,5);y(D)}}catch(l){console.warn("Failed to fetch recent requests:",(l==null?void 0:l.message)||l)}};L(),V()},[]);const k=async()=>{if(x.name.trim())try{j(!0);const s=(n==null?void 0:n.token)||localStorage.getItem("token")||void 0;await m.post("/api/vendors/services",x,{token:s}),v({name:"",description:""});const t=await m.get("/api/vendors/stats",{token:s});t!=null&&t.data&&(h(t.data),u(t.data.services||[]))}catch(s){alert((s==null?void 0:s.message)||"Failed to add service")}finally{j(!1)}},M=async s=>{if(confirm("Remove this service?"))try{const t=(n==null?void 0:n.token)||localStorage.getItem("token")||void 0;await m.delete(`/api/vendors/services/${s}`,{token:t});const i=await m.get("/api/vendors/stats",{token:t});i!=null&&i.data&&(h(i.data),u(i.data.services||[]))}catch(t){alert((t==null?void 0:t.message)||"Failed to remove service")}},N=d.ratingAverage||0,S=d.ratingCount||0,C=Math.round(N);return e.jsxs("div",{className:"min-h-screen flex flex-col bg-ng-light",children:[e.jsx(F,{}),e.jsx("main",{className:"flex-grow pt-40 pb-16 px-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-ng-blue to-ng-accent rounded-2xl shadow-lg p-8 mb-8 text-white",children:[e.jsx("h1",{className:"text-4xl font-normal mb-2",style:{fontFamily:"'DM Serif Display', serif"},children:"Vendor Dashboard"}),e.jsxs("p",{className:"text-lg opacity-90",style:{fontFamily:"Poppins, sans-serif"},children:["Welcome, ",(r==null?void 0:r.name)||"Vendor","! Manage your services."]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition-shadow border-l-4 border-ng-blue",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Active Services"}),e.jsx("div",{className:"text-3xl font-bold text-ng-blue",children:d.inProgress||0})]}),e.jsx("div",{className:"bg-ng-blue/10 p-3 rounded-lg",children:e.jsx("svg",{className:"w-8 h-8 text-ng-blue",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Services offered"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition-shadow border-l-4 border-orange-500",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Pending Requests"}),e.jsx("div",{className:"text-3xl font-bold text-orange-600",children:d.open||0})]}),e.jsx("div",{className:"bg-orange-100 p-3 rounded-lg",children:e.jsx("svg",{className:"w-8 h-8 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),e.jsx("button",{className:"text-sm text-orange-600 hover:underline",children:"View requests →"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition-shadow border-l-4 border-green-500",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Completed Jobs"}),e.jsx("div",{className:"text-3xl font-bold text-green-600",children:d.completed||0})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:e.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"This month"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition-shadow border-l-4 border-blue-500",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Earnings"}),e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:"$0"})]}),e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:e.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Coming soon"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition-shadow border-l-4 border-ng-blue",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Announcements"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Latest updates"})]}),e.jsx("div",{className:"bg-ng-blue/10 p-3 rounded-lg",children:e.jsx("svg",{className:"w-8 h-8 text-ng-blue",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"})})})]}),e.jsx("div",{className:"max-h-48 overflow-y-auto mb-3",children:e.jsx(W,{limit:3})}),e.jsx("button",{onClick:()=>c("/announcements"),className:"text-sm text-ng-blue hover:underline",children:"View all →"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-normal text-ng-blue",style:{fontFamily:"'DM Serif Display', serif"},children:"Recent Requests"}),e.jsx("svg",{className:"w-6 h-6 text-ng-blue",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})]}),g.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"text-lg mb-2",children:"No recent requests"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Open or in-progress tasks will show here"})]}),g.length>0&&e.jsx("div",{className:"space-y-3 max-h-72 overflow-y-auto",children:g.map(s=>e.jsxs("div",{className:"bg-white p-3 rounded-md shadow-sm border text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:s.title}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.category," • ",s.priority]})]}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${s.status==="open"?"bg-amber-50 text-amber-700":"bg-blue-50 text-blue-700"}`,children:s.status})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:s.description})]},s._id))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-normal text-ng-blue",style:{fontFamily:"'DM Serif Display', serif"},children:"My Services"}),e.jsx("svg",{className:"w-6 h-6 text-ng-blue",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("input",{type:"text",placeholder:"Service name",className:"border rounded px-3 py-2 text-sm",value:x.name,onChange:s=>v(t=>({...t,name:s.target.value}))}),e.jsx("textarea",{placeholder:"Description (optional)",className:"border rounded px-3 py-2 text-sm",rows:2,value:x.description,onChange:s=>v(t=>({...t,description:s.target.value}))}),e.jsxs("button",{onClick:k,disabled:b||!x.name.trim(),className:"w-full bg-ng-blue disabled:opacity-40 text-white px-6 py-2 rounded-lg hover:bg-ng-accent transition-colors font-medium flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),b?"Saving...":"Add Service"]})]}),e.jsxs("div",{className:"space-y-2 max-h-56 overflow-y-auto",children:[p.length===0&&e.jsx("p",{className:"text-sm text-gray-500",children:"No services added yet"}),p.map((s,t)=>e.jsxs("div",{className:"bg-white border rounded p-3 text-sm flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:s.name}),s.description&&e.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:s.description})]}),e.jsx("button",{onClick:()=>M(t),className:"text-xs text-rose-600 hover:underline",children:"Remove"})]},t))]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mt-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsx("h2",{className:"text-2xl font-normal text-ng-blue",style:{fontFamily:"'DM Serif Display', serif"},children:"Vendor Profile"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Name"}),e.jsx("p",{className:"text-gray-900 font-medium",children:(r==null?void 0:r.name)||"Not set"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("p",{className:"text-gray-900",children:(r==null?void 0:r.email)||"Not set"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Service Category"}),e.jsx("p",{className:"text-gray-900",children:d.serviceCategory||"Not set"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rating"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex text-yellow-400",children:[1,2,3,4,5].map(s=>e.jsx("svg",{className:`w-5 h-5 ${s<=C?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},s))}),e.jsxs("span",{className:"text-gray-600",children:["(",S," reviews, avg ",N.toFixed(1),")"]})]})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>c("/profile"),className:"bg-ng-blue text-white px-6 py-2 rounded-lg hover:bg-ng-accent transition-colors",children:"Edit Profile"})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mt-6",children:[e.jsx("h2",{className:"text-2xl font-normal text-ng-blue mb-6",style:{fontFamily:"'DM Serif Display', serif"},children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("button",{onClick:()=>c("/complaints?status=open"),className:"p-4 rounded-lg border-2 border-gray-200 hover:border-ng-blue hover:bg-ng-blue/5 transition-all text-center",children:[e.jsx("svg",{className:"w-8 h-8 mx-auto mb-2 text-ng-blue",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"View Requests"})]}),e.jsxs("button",{onClick:()=>c("/complaints?status=completed"),className:"p-4 rounded-lg border-2 border-gray-200 hover:border-ng-blue hover:bg-ng-blue/5 transition-all text-center",children:[e.jsx("svg",{className:"w-8 h-8 mx-auto mb-2 text-ng-blue",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Completed Jobs"})]}),e.jsxs("button",{onClick:()=>c("/earnings"),className:"p-4 rounded-lg border-2 border-gray-200 hover:border-ng-blue hover:bg-ng-blue/5 transition-all text-center",children:[e.jsx("svg",{className:"w-8 h-8 mx-auto mb-2 text-ng-blue",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"View Earnings"})]}),e.jsxs("button",{onClick:()=>c("/"),className:"p-4 rounded-lg border-2 border-gray-200 hover:border-ng-blue hover:bg-ng-blue/5 transition-all text-center",children:[e.jsx("svg",{className:"w-8 h-8 mx-auto mb-2 text-ng-blue",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Contact Support"})]})]})]})]})}),e.jsx(A,{})]})}export{O as default};
