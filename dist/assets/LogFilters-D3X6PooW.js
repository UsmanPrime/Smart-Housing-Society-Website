import{j as e}from"./index-BR_n0HI9.js";import{r as h}from"./react-core-Ljpx9oFu.js";const f=["john.doe","sara.khan","lee.wong","admin","vendor.x"],j=["LOGIN","LOGOUT","PAYMENT_SUBMIT","PAYMENT_APPROVE","PAYMENT_REJECT","USER_CREATE","USER_VERIFY","FACILITY_BOOK","FACILITY_CANCEL"];function T(r,{from:t,to:n,user:l,action:c}){return r.filter(d=>{const i=new Date(d.ts);return!(t&&i<new Date(t)||n&&i>new Date(n)||l!=="all"&&d.user!==l||c!=="all"&&d.action!==c)})}function L(r,t){const n=t.toLowerCase();return r.filter(l=>{var c;return l.user.toLowerCase().includes(n)||l.action.toLowerCase().includes(n)||l.ip.toLowerCase().includes(n)||(((c=l.meta)==null?void 0:c.ref)||"").toLowerCase().includes(n)})}function N(r,t,n="asc"){const l=[...r].sort((c,d)=>{var a,o;let i,x;return t==="ts"?(i=new Date(c.ts).getTime(),x=new Date(d.ts).getTime()):t==="meta"||t==="ref"?(i=((a=c==null?void 0:c.meta)==null?void 0:a.ref)||"",x=((o=d==null?void 0:d.meta)==null?void 0:o.ref)||""):(i=String(c[t]??""),x=String(d[t]??"")),i>x?1:i<x?-1:0});return n==="desc"?l.reverse():l}function g(r){const t=new Date(r),n=l=>String(l).padStart(2,"0");return`${t.getFullYear()}-${n(t.getMonth()+1)}-${n(t.getDate())} ${n(t.getHours())}:${n(t.getMinutes())}:${n(t.getSeconds())}`}const b=f,w=j;function E({logs:r,highlight:t,page:n,totalPages:l,setPage:c,sortCallback:d}){const[i,x]=h.useState({column:"ts",dir:"desc"}),a=s=>{x(m=>{const u=m.column===s&&m.dir==="asc"?"desc":"asc",p=N(r,s,u);return d(p),{column:s,dir:u}})},o=s=>{if(!t)return s;const m=s.toLowerCase().indexOf(t.toLowerCase());return m===-1?s:e.jsxs(e.Fragment,{children:[s.slice(0,m),e.jsx("mark",{className:"bg-yellow-200",children:s.slice(m,m+t.length)}),s.slice(m+t.length)]})};return e.jsxs("div",{className:"bg-white rounded-xl shadow p-4",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsx("tr",{className:"text-left bg-slate-50",children:["id","ts","user","action","ip","ref"].map(s=>e.jsxs("th",{className:"px-3 py-2 cursor-pointer select-none",onClick:()=>a(s==="ref"?"meta":s),children:[s.toUpperCase(),i.column===s&&e.jsx("span",{className:"ml-1 text-xs",children:i.dir==="asc"?"▲":"▼"})]},s))})}),e.jsxs("tbody",{children:[r.map(s=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-3 py-2",children:o(s.id)}),e.jsx("td",{className:"px-3 py-2",children:g(s.ts)}),e.jsx("td",{className:"px-3 py-2",children:o(s.user)}),e.jsx("td",{className:"px-3 py-2",children:o(s.action)}),e.jsx("td",{className:"px-3 py-2",children:o(s.ip)}),e.jsx("td",{className:"px-3 py-2",children:o(s.meta.ref)})]},s.id)),r.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-3 py-6 text-center text-gray-500",children:"No logs match filters."})})]})]})}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("span",{className:"text-xs text-gray-600",children:["Page ",n," of ",l]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>c(s=>Math.max(1,s-1)),disabled:n===1,className:"px-2 py-1 text-xs rounded bg-white border disabled:opacity-40",children:"Prev"}),e.jsx("button",{onClick:()=>c(s=>Math.min(l,s+1)),disabled:n===l,className:"px-2 py-1 text-xs rounded bg-white border disabled:opacity-40",children:"Next"})]})]})]})}const v=r=>r?new Date(`${r}T00:00:00`).toISOString():null,y=r=>r?new Date(`${r}T23:59:59.999`).toISOString():null;function A({filters:r,setFilters:t,onApply:n,onClear:l,search:c,setSearch:d}){const i=r.from?r.from.slice(0,10):"",x=r.to?r.to.slice(0,10):"";return e.jsxs("div",{className:"bg-white rounded-xl shadow p-4 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1 text-[#06164a]",children:"From"}),e.jsx("input",{type:"date",value:i,onChange:a=>t(o=>({...o,from:v(a.target.value)})),className:"w-full px-3 py-2 rounded border text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1 text-[#06164a]",children:"To"}),e.jsx("input",{type:"date",value:x,onChange:a=>t(o=>({...o,to:y(a.target.value)})),className:"w-full px-3 py-2 rounded border text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1 text-[#06164a]",children:"User"}),e.jsxs("select",{value:r.user,onChange:a=>t(o=>({...o,user:a.target.value})),className:"w-full px-3 py-2 rounded border text-sm",children:[e.jsx("option",{value:"all",children:"All"}),b.map(a=>e.jsx("option",{value:a,children:a},a))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1 text-[#06164a]",children:"Action"}),e.jsxs("select",{value:r.action,onChange:a=>t(o=>({...o,action:a.target.value})),className:"w-full px-3 py-2 rounded border text-sm",children:[e.jsx("option",{value:"all",children:"All"}),w.map(a=>e.jsx("option",{value:a,children:a},a))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1 text-[#06164a]",children:"Search"}),e.jsx("input",{value:c,onChange:a=>d(a.target.value),placeholder:"Term",className:"w-full px-3 py-2 rounded border text-sm"})]})]}),e.jsxs("div",{className:"mt-4 flex gap-3",children:[e.jsx("button",{onClick:n,className:"px-4 py-2 rounded bg-[#06164a] text-white text-sm",children:"Apply Filters"}),e.jsx("button",{onClick:l,className:"px-4 py-2 rounded bg-white text-[#06164a] border border-[#06164a] text-sm",children:"Clear"})]})]})}export{A as L,E as a,T as f,L as s};
