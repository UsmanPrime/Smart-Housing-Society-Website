import{j as e,N as g,F as v}from"./index-BR_n0HI9.js";import{r}from"./react-core-Ljpx9oFu.js";import{P as f,U as j,A as b,a as N}from"./PaymentTrendChart-DMmueMg3.js";import{a as i}from"./api-B_kgTFai.js";import"./vendor-B9ygI19o.js";function T(){const[s,y]=r.useState(null),[o,c]=r.useState(!0),[l,d]=r.useState(""),[n,u]=r.useState("monthly"),m=async()=>{c(!0),d("");try{const[a,t,p,x]=await Promise.all([i.get("/api/reports/payment-summary"),i.get("/api/reports/activity"),i.get(`/api/reports/payment-trend?period=${n}`),i.get("/api/reports/recent-payments")]);y({payments:a.success?a.data:null,users:t.success?{totalUsers:t.data.totalUsers,activeResidents:t.data.activeResidents,activeVendors:t.data.activeVendors,pendingApprovals:t.data.pendingApprovals}:null,activity:t.success?{logins7Days:t.data.logins7Days,actionsToday:t.data.actionsToday,actionDistribution:t.data.actionDistribution||[]}:null,paymentTrend:p.success?p.data:null,recentPayments:x.success?x.payments:[]})}catch(a){console.error("Error fetching report data:",a),d(a.message||"Failed to load reports")}finally{c(!1)}},h=()=>m();return r.useEffect(()=>{m()},[n]),e.jsxs("div",{className:"min-h-screen flex flex-col bg-[#c3c5ce]",children:[e.jsx(g,{}),e.jsx("main",{className:"flex-grow pt-40 pb-16 px-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("h1",{className:"text-4xl font-normal text-[#06164a] mb-8",style:{fontFamily:"'DM Serif Display', serif"},children:"Reports Dashboard"}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("div",{className:"flex gap-2",children:e.jsxs("label",{className:"text-[#06164a] flex items-center gap-2",children:["Trend Period:",e.jsxs("select",{value:n,onChange:a=>u(a.target.value),className:"px-3 py-2 rounded bg-white text-[#06164a] border border-[#06164a]",children:[e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"yearly",children:"Yearly"})]})]})}),e.jsx("button",{onClick:h,className:"px-4 py-2 rounded bg-[#06164a] text-white text-sm hover:bg-[#0f335b]",children:"Refresh"})]}),l&&e.jsx("div",{className:"rounded-md border border-red-400 bg-red-100 text-red-800 px-4 py-3 mb-6",children:l}),o&&e.jsx("div",{className:"text-sm text-[#06164a]",children:"Loading metricsâ€¦"}),!o&&s&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(f,{metrics:s.payments}),e.jsx(j,{metrics:s.users}),e.jsx(b,{activity:s.activity})]}),e.jsx(N,{trend:s.paymentTrend})]})]})}),e.jsx(v,{})]})}export{T as default};
