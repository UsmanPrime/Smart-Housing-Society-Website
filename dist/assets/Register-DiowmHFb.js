const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CCpieWfV.css","assets/index-DSpZquNv.css"])))=>i.map(i=>d[i]);
import{j as e,r as G,F as J,_}from"./index-BR_n0HI9.js";import{r as s,u as K,L as z}from"./react-core-Ljpx9oFu.js";import{a as Q}from"./vendor-B9ygI19o.js";import{A as W}from"./api-B_kgTFai.js";import{p as X}from"./register-DvUBbC6m.js";function ie(){const[o,I]=s.useState("resident"),[u,T]=s.useState(""),[x,O]=s.useState(""),[c,L]=s.useState(""),[p,D]=s.useState(""),[m,$]=s.useState(""),[r,h]=s.useState([]),[w,y]=s.useState(!1),[M,V]=s.useState(!1),[f,v]=s.useState(!1),[j,l]=s.useState(""),[N,P]=s.useState(""),[S,H]=s.useState(!1),Y=K(),b=[{value:"plumbing",label:"Plumbing"},{value:"electrical",label:"Electrical"},{value:"cleaning",label:"Cleaning"},{value:"maintenance",label:"Maintenance"},{value:"security",label:"Security"},{value:"other",label:"Other"}],B=t=>{h(a=>a.includes(t)?a.filter(i=>i!==t):[...a,t])},U=()=>{h(b.map(t=>t.value))},Z=()=>{h([])};s.useEffect(()=>{(async()=>{await Promise.all([_(()=>Promise.resolve({}),__vite__mapDeps([0])),_(()=>Promise.resolve({}),__vite__mapDeps([1]))])})();const a=setTimeout(()=>V(!0),20);return()=>clearTimeout(a)},[]);const q=async t=>{var a,i,k,C,F,E,R,A;if(t.preventDefault(),l(""),P(""),!u||!x||!c||!p||!m){l("Please fill all fields");return}if(c!==p){l("Passwords do not match");return}if(!S){l("Please verify that you are not a robot");return}v(!0);try{const n=`${W}/api/auth/register`,d={name:u,email:x,password:c,phone:m,role:o};o==="vendor"&&(d.specialization=r);const g=await Q.post(n,d);(a=g.data)!=null&&a.success?(P(((i=g.data)==null?void 0:i.message)||"Registration successful! Please wait for admin approval."),setTimeout(()=>Y("/login"),2e3)):l(((k=g.data)==null?void 0:k.message)||"Registration failed")}catch(n){const d=((F=(C=n.response)==null?void 0:C.data)==null?void 0:F.message)||(Array.isArray((R=(E=n.response)==null?void 0:E.data)==null?void 0:R.errors)?(A=n.response.data.errors[0])==null?void 0:A.msg:null)||"Registration failed. Please try again.";l(d)}finally{v(!1)}};return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(Navbar,{}),e.jsx("style",{children:`
        input:-webkit-autofill,
        input:-webkit-autofill:hover,
        input:-webkit-autofill:focus,
        input:-webkit-autofill:active {
          -webkit-box-shadow: 0 0 0px 1000px #0b1a4a inset !important;
          box-shadow: 0 0 0px 1000px #0b1a4a inset !important;
          -webkit-text-fill-color: #ffffff !important;
        }
        input:-moz-autofill {
          box-shadow: 0 0 0px 1000px #0b1a4a inset !important;
          -moz-text-fill-color: #ffffff !important;
        }
      `}),e.jsxs("main",{className:"relative flex-grow flex items-center justify-center min-h-screen pt-36 pb-20",style:{backgroundImage:`url(${X})`,backgroundPosition:"top center",backgroundSize:"cover",backgroundRepeat:"no-repeat"},children:[e.jsx("div",{className:"absolute inset-0 bg-black/45 pointer-events-none"}),e.jsx("div",{className:`
            relative z-10 w-full max-w-4xl px-6 md:px-8 mt-8
            transform transition-all duration-500 ease-out
            ${M?"opacity-100 translate-y-0 scale-100":"opacity-0 -translate-y-6 scale-95"}
          `,children:e.jsxs("div",{className:"mx-auto max-w-2xl",children:[e.jsxs("div",{className:"text-left mb-8",children:[e.jsx("h1",{className:"text-4xl font-normal text-white mb-2",style:{fontFamily:'"DM Serif Display", serif'},children:"Register"}),e.jsx("p",{className:"text-lg text-white/90",style:{fontFamily:"Poppins, sans-serif"},children:"Create New Account"})]}),e.jsxs("form",{className:"space-y-8",onSubmit:q,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-lg font-medium text-white/90 mb-3",style:{fontFamily:"Poppins, sans-serif"},children:"Select user type"}),e.jsxs("select",{value:o,onChange:t=>I(t.target.value),className:"w-full px-6 py-4 rounded-xl text-white text-lg bg-[#0b1a4a] border border-white/10 focus:outline-none focus:ring-2 focus:ring-white/30",style:{fontFamily:"Poppins, sans-serif"},children:[e.jsx("option",{value:"resident",children:"Resident"}),e.jsx("option",{value:"vendor",children:"Vendor"})]})]}),o==="vendor"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-lg font-medium text-white/90 mb-3",style:{fontFamily:"Poppins, sans-serif"},children:"Specialization (select one or more)"}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>y(t=>!t),className:"w-full px-6 py-4 rounded-xl text-white text-left text-lg bg-[#0b1a4a] border border-white/10 focus:outline-none focus:ring-2 focus:ring-white/30","aria-haspopup":"listbox","aria-expanded":w?"true":"false",children:[r.length===0&&e.jsx("span",{className:"text-white/70",children:"Select specializations"}),r.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(t=>{const a=b.find(i=>i.value===t);return e.jsx("span",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/10 text-white/90 text-sm",children:(a==null?void 0:a.label)||t},t)})})]}),w&&e.jsxs("div",{className:"absolute z-20 mt-2 w-full rounded-xl bg-[#0b1a4a] border border-white/10 shadow-lg",children:[e.jsx("div",{className:"max-h-52 overflow-y-auto py-2",children:b.map(t=>e.jsxs("label",{className:"flex items-center gap-3 px-4 py-3 hover:bg-white/5 cursor-pointer select-none",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 cursor-pointer",checked:r.includes(t.value),onChange:()=>B(t.value)}),e.jsx("span",{className:"text-white/90 capitalize",children:t.label})]},t.value))}),e.jsxs("div",{className:"flex items-center justify-between gap-2 px-3 py-2 border-t border-white/10 bg-[#0b1a4a]",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:U,className:"text-sm text-white/90 hover:underline",children:"Select all"}),e.jsx("button",{type:"button",onClick:Z,className:"text-sm text-white/80 hover:underline",children:"Clear"})]}),e.jsx("button",{type:"button",onClick:()=>y(!1),className:"text-sm bg-white/10 hover:bg-white/20 text-white px-3 py-1 rounded-md",children:"Done"})]})]})]}),e.jsx("p",{className:"text-xs text-white/70 mt-2",children:"You can choose multiple options."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-lg font-medium text-white/90 mb-3",style:{fontFamily:"Poppins, sans-serif"},children:"Name"}),e.jsx("input",{type:"text",value:u,onChange:t=>T(t.target.value),placeholder:"Enter your full name",className:"w-full px-8 py-5 rounded-xl text-white text-lg placeholder-white/70 bg-[#0b1a4a] border border-white/10 focus:outline-none focus:ring-2 focus:ring-white/30"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-lg font-medium text-white/90 mb-3",style:{fontFamily:"Poppins, sans-serif"},children:"Email"}),e.jsx("input",{type:"email",value:x,onChange:t=>O(t.target.value),placeholder:"Enter your email",className:"w-full px-8 py-5 rounded-xl text-white text-lg placeholder-white/70 bg-[#0b1a4a] border border-white/10 focus:outline-none focus:ring-2 focus:ring-white/30"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-lg font-medium text-white/90 mb-3",style:{fontFamily:"Poppins, sans-serif"},children:"Password"}),e.jsx("input",{type:"password",value:c,onChange:t=>L(t.target.value),placeholder:"Create a password",className:"w-full px-8 py-5 rounded-xl text-white text-lg placeholder-white/70 bg-[#0b1a4a] border border-white/10 focus:outline-none focus:ring-2 focus:ring-white/30"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-lg font-medium text-white/90 mb-3",style:{fontFamily:"Poppins, sans-serif"},children:"Re-enter password"}),e.jsx("input",{type:"password",value:p,onChange:t=>D(t.target.value),placeholder:"Re-enter your password",className:"w-full px-8 py-5 rounded-xl text-white text-lg placeholder-white/70 bg-[#0b1a4a] border border-white/10 focus:outline-none focus:ring-2 focus:ring-white/30"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-lg font-medium text-white/90 mb-3",style:{fontFamily:"Poppins, sans-serif"},children:"Contact number"}),e.jsx("input",{type:"tel",value:m,onChange:t=>$(t.target.value),placeholder:"Enter contact number",className:"w-full px-8 py-5 rounded-xl text-white text-lg placeholder-white/70 bg-[#0b1a4a] border border-white/10 focus:outline-none focus:ring-2 focus:ring-white/30"})]}),e.jsxs("div",{className:"flex items-center gap-6 py-3 px-6 bg-[#0b1a4a] w-fit border border-white/10",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-white/30 flex items-center justify-center",children:e.jsx("input",{type:"checkbox",checked:S,onChange:t=>H(t.target.checked),className:"w-4 h-4 cursor-pointer",id:"recaptcha-register"})}),e.jsx("label",{htmlFor:"recaptcha-register",className:"text-white/90 text-base cursor-pointer",style:{fontFamily:"Poppins, sans-serif"},children:"I'm not a robot"}),e.jsx("img",{src:G,alt:"reCAPTCHA",className:"w-8 h-8 ml-2"})]}),j&&e.jsx("div",{className:"bg-red-500/20 text-red-100 border border-red-500/30 rounded-xl p-4",children:j}),N&&e.jsx("div",{className:"bg-green-500/20 text-green-100 border border-green-500/30 rounded-xl p-4",children:N}),e.jsx("div",{className:"border-t border-white/30 my-6"}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:f,className:`group relative w-32 md:w-40 flex justify-center py-3 px-4 border border-transparent text-base font-medium rounded-md text-white bg-[#0b1a4a] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#0b1a4a] ${f?"opacity-60 cursor-not-allowed":"hover:opacity-95"}`,children:f?"Registering...":"Register"})}),e.jsxs("div",{className:"text-left space-y-2 pt-4",children:[e.jsx("div",{children:e.jsxs("span",{className:"text-base text-white/90",children:["Already have an account?"," ",e.jsx(z,{to:"/login",className:"underline",children:"Login"})]})}),e.jsx("div",{children:e.jsx(z,{to:"/forgot-password",className:"text-base text-white/90 underline",children:"Forget Your Password?"})})]})]}),e.jsx("div",{className:"h-8 md:h-12"})]})})]}),e.jsx(J,{})]})}export{ie as default};
